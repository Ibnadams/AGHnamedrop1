<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3-Letter Word Drop: 60-Second Challenge (Easier Mode)</title>
    
    <style>
        /* --- CSS STYLES - Using Variables for Clarity --- */
        :root {
            --primary-color: #2196F3; /* Blue */
            --secondary-color: #4CAF50; /* Green */
            --background-dark: rgba(0, 0, 0, 0.4);
            --text-light: white;
            --font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            --drop-duration: 9s; /* Max drop duration for transition property definition */
        }
        
        body {
            font-family: var(--font-family);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: var(--primary-color); 
            color: var(--text-light);
            padding: 10px;
        }

        #game-container {
            width: 90%;
            max-width: 600px;
            background-color: var(--background-dark); 
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 25px rgba(0, 0, 0, 0.7);
            position: relative;
            overflow: hidden;
        }

        #header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        #header h1 {
            font-size: 1.8em;
        }

        #stats p {
            margin: 5px 0;
            font-size: 1.2em;
            font-weight: bold;
        }

        #game-area {
            width: 100%;
            height: 400px;
            border: 3px solid var(--text-light);
            border-radius: 8px;
            position: relative;
            overflow: hidden;
            margin-bottom: 15px;
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        /* A11Y improvement: Visually hidden label */
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }

        #name-input {
            width: calc(100% - 22px);
            padding: 12px;
            font-size: 1.2em;
            border: none;
            border-radius: 5px;
            margin-bottom: 10px;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.3);
            /* Keep text-transform: capitalize for aesthetic, though 3-letter words are often typed lowercase */
            text-transform: capitalize; 
        }

        #start-button {
            width: 100%;
            padding: 12px;
            font-size: 1.2em;
            background-color: var(--secondary-color); 
            color: var(--text-light);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        #start-button:hover:not(:disabled) {
            background-color: #45a049;
        }
        
        #start-button:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }

        /* Watermark Styling */
        #watermark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-30deg);
            font-size: 2.5em; 
            font-weight: 900;
            color: rgba(255, 255, 255, 0.1); 
            pointer-events: none; 
            z-index: 0;
            white-space: nowrap;
        }

        /* Falling Name Styling */
        .falling-name {
            position: absolute;
            top: -30px; 
            padding: 5px 10px;
            background-color: rgba(255, 255, 255, 0.95);
            color: var(--primary-color);
            border-radius: 4px;
            font-weight: bold;
            white-space: nowrap;
            z-index: 1;
            /* Define all transitions in CSS, duration set by JS */
            transition: transform linear var(--drop-duration); 
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.4);
        }

        /* --- MOBILE OPTIMIZATION --- */
        @media (max-width: 450px) {
            #game-container {
                padding: 15px 10px; 
                width: 95%; 
            }

            #header {
                flex-direction: column; 
                align-items: flex-start;
                margin-bottom: 15px;
            }
            
            #header h1 {
                font-size: 1.6em; 
                margin-bottom: 10px;
            }

            #stats {
                width: 100%;
                display: flex;
                justify-content: space-between; 
            }
            
            #stats p {
                font-size: 1.1em; 
            }

            #name-input, #start-button {
                font-size: 1.1em; 
            }

            #game-area {
                height: 350px; 
            }
            
            #watermark {
                font-size: 2em; 
            }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="header">
            <h1>3-Letter Word Drop ðŸ“š</h1>
            <div id="stats">
                <p>âŒ› Time: <span id="timer">60</span>s</p>
                <p>Score: <span id="score">0</span></p>
            </div>
        </div>

        <div id="game-area">
        </div>
        
        <label for="name-input" class="visually-hidden">Type the falling 3-letter word</label>
        <input type="text" id="name-input" placeholder="Type the falling 3-letter word here..." autofocus maxlength="3">
        
        <button id="start-button">Start 60-Second Challenge!</button>

        <div id="watermark">PLATEAU STATE AREWAGENEUIS HUB</div>
    </div>
    
    <script>
        /* --- JAVASCRIPT LOGIC --- */
        const THREE_LETTER_WORDS = [
            "Act", "Age", "Air", "All", "And", "Any", "Ape", "Art", "Ask", "Awe", "Bag", 
            "Ban", "Bed", "Big", "Box", "But", "Can", "Cap", "Car", "Cat", "Day", "Dog", 
            "Dry", "Ear", "Eat", "End", "Eye", "Far", "Few", "Fit", "Fly", "For", "Fun", 
            "Get", "Got", "Had", "Has", "Her", "Him", "His", "How", "Ice", "Ill", "Ink", 
            "Job", "Joy", "Kid", "Kit", "Lag", "Law", "Lay", "Let", "Lie", "Low", "Man", 
            "Max", "May", "Met", "New", "Not", "Now", "Off", "Old", "One", "Out", "Own", 
            "Pay", "Pen", "Pet", "Put", "Run", "Sad", "Say", "See", "She", "Six", "Son", 
            "Sun", "Ten", "The", "Too", "Try", "Two", "Use", "Was", "Way", "Who", "Why", 
            "Yes", "Yet", "You", "Zip", "Zoo"
        ];

        const gameArea = document.getElementById('game-area');
        const nameInput = document.getElementById('name-input');
        const startButton = document.getElementById('start-button');
        const timerDisplay = document.getElementById('timer');
        const scoreDisplay = document.getElementById('score');

        let score = 0;
        let timeLeft = 60;
        let gameInterval;
        let nameDropInterval;
        let isGameRunning = false;
        let activeNames = [];

        // --- Game Functions ---

        function startGame() {
            if (isGameRunning) return;

            // Reset game
            score = 0;
            timeLeft = 60;
            scoreDisplay.textContent = score;
            timerDisplay.textContent = timeLeft;
            gameArea.innerHTML = '';
            activeNames = [];
            nameInput.value = '';
            nameInput.disabled = false;
            startButton.disabled = true;
            isGameRunning = true;
            
            nameInput.focus();

            // Start the timer (runs every second)
            gameInterval = setInterval(updateTimer, 1000); 
            
            // New name drops every 2 seconds
            nameDropInterval = setInterval(dropNewName, 2000); 
        }

        function updateTimer() {
            timeLeft--;
            timerDisplay.textContent = timeLeft;

            if (timeLeft <= 0) {
                endGame();
            }
        }

        function endGame() {
            clearInterval(gameInterval);
            clearInterval(nameDropInterval);
            isGameRunning = false;
            nameInput.disabled = true;
            startButton.disabled = false;
            
            // Clean up any remaining names and their listeners
            activeNames.forEach(item => {
                item.element.removeEventListener('transitionend', handleMissedName);
                item.element.remove();
            });
            activeNames = [];
            
            setTimeout(() => {
                alert(`Time's up! Your final score is ${score}. Great job!`);
            }, 100);
        }

        // Optimized way to handle missed names using transitionend
        function handleMissedName(event) {
            // Check if the element has actually reached the bottom (transform completed)
            if (event.propertyName === 'transform') {
                const element = event.target;
                const nameId = parseInt(element.dataset.id);
                
                // Remove from active names list
                activeNames = activeNames.filter(item => item.id !== nameId);
                
                // Remove from DOM
                element.removeEventListener('transitionend', handleMissedName);
                element.remove();
            }
        }


        function dropNewName() {
            if (!isGameRunning) return;

            // Use the new THREE_LETTER_WORDS array
            const nameText = THREE_LETTER_WORDS[Math.floor(Math.random() * THREE_LETTER_WORDS.length)];
            const nameElement = document.createElement('div');
            nameElement.classList.add('falling-name');
            nameElement.textContent = nameText;
            
            const gameAreaWidth = gameArea.clientWidth;
            // Safer margin calculation
            const safeWidth = gameAreaWidth - nameElement.offsetWidth - 20; // 20px buffer
            const startX = Math.random() * (safeWidth > 0 ? safeWidth : gameAreaWidth - 100);
            nameElement.style.left = `${Math.max(10, startX)}px`;

            const nameId = Date.now();
            nameElement.dataset.id = nameId;
            nameElement.dataset.name = nameText;
            
            // Add listener to efficiently detect when the name falls off the screen
            nameElement.addEventListener('transitionend', handleMissedName);
            
            activeNames.push({ id: nameId, element: nameElement, name: nameText });

            gameArea.appendChild(nameElement);

            // Drop duration is 6 to 9 seconds (Slower pace)
            const dropDuration = 6 + Math.random() * 3; 
            nameElement.style.transitionDuration = `${dropDuration}s`;
            
            // Start the drop after a brief moment to allow CSS to register the transition
            setTimeout(() => {
                // Drop slightly past the bottom edge of the game area
                nameElement.style.transform = `translateY(${gameArea.clientHeight + 40}px)`;
            }, 50); 
        }

        function checkInput(event) {
            if (!isGameRunning || event.key !== 'Enter') return;

            const typedName = nameInput.value.trim().toLowerCase();
            
            if (typedName === '') return;

            const matchedIndex = activeNames.findIndex(item => 
                item.name.toLowerCase() === typedName
            );

            if (matchedIndex !== -1) {
                // Successful Hit!
                const matchedItem = activeNames[matchedIndex];
                
                score++;
                scoreDisplay.textContent = score;

                // Visual feedback
                matchedItem.element.style.backgroundColor = '#FFD700'; 
                matchedItem.element.style.color = 'black';
                
                // Remove the name instantly and remove the transitionend listener
                matchedItem.element.removeEventListener('transitionend', handleMissedName);
                
                setTimeout(() => {
                    matchedItem.element.remove();
                }, 100); 

                activeNames.splice(matchedIndex, 1);
                nameInput.value = ''; 
            } else {
                 // Flash input red for an incorrect guess
                 nameInput.style.backgroundColor = 'rgba(255, 100, 100, 0.3)';
                 setTimeout(() => {
                    nameInput.style.backgroundColor = 'white';
                 }, 150);
            }
        }

        // --- Event Listeners and Initialization ---

        startButton.addEventListener('click', startGame);
        nameInput.addEventListener('keydown', checkInput);

        // Initial setup
        nameInput.disabled = true;
    </script>
</body>
</html>
